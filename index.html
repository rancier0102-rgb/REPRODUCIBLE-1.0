<!DOCTYPE html><html lang="es"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Series+ - Plataforma de Streaming</title><style>:root{--primary-color:#e50914;--background-dark:#141414;--background-card:#181818;--background-secondary:#222;--text-light:#fff;--muted:#b3b3b3;--radius:8px;--transition:.25s ease;--focus-shadow:0 0 25px rgba(229,9,20,.9)}*{box-sizing:border-box;margin:0;padding:0}body{font-family:'Segoe UI',Arial,sans-serif;background:var(--background-dark);color:var(--text-light);overflow-x:hidden;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}@media screen and (min-width:1920px){body{zoom:1.2}}@media screen and (min-width:3840px){body{zoom:1.5}}.loader{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);color:var(--primary-color);font-size:1.8rem;z-index:1000}.loader.hidden{display:none}header{padding:20px 40px;background:linear-gradient(to bottom,rgba(20,20,20,.98),rgba(20,20,20,.95));position:sticky;top:0;display:flex;gap:30px;align-items:center;z-index:10;backdrop-filter:blur(20px);box-shadow:0 4px 20px rgba(0,0,0,.5);min-height:80px}.logo{font-weight:700;font-size:2rem;color:var(--primary-color);text-shadow:2px 2px 4px rgba(0,0,0,.5);margin-right:20px}.search-container{flex:1;max-width:600px;position:relative}.search-wrapper{position:relative;width:100%}.search-box{width:100%;background:linear-gradient(135deg,rgba(255,255,255,.08),rgba(255,255,255,.05));border:1px solid rgba(255,255,255,.08);border-radius:30px;padding:16px 55px 16px 24px;color:#fff;font-size:16px;font-weight:400;transition:all .4s cubic-bezier(.4,0,.2,1);backdrop-filter:blur(10px);box-shadow:inset 0 2px 5px rgba(0,0,0,.2)}.search-box::placeholder{color:rgba(255,255,255,.4);font-weight:300;letter-spacing:.5px}.search-box:hover{background:linear-gradient(135deg,rgba(255,255,255,.12),rgba(255,255,255,.08));border-color:rgba(255,255,255,.15);box-shadow:inset 0 2px 5px rgba(0,0,0,.2),0 0 20px rgba(255,255,255,.05)}.search-box:focus{outline:0;background:linear-gradient(135deg,rgba(255,255,255,.15),rgba(255,255,255,.1));border-color:rgba(229,9,20,.5);box-shadow:inset 0 2px 8px rgba(0,0,0,.3),0 0 30px rgba(229,9,20,.2);padding-left:28px}.search-box.focused{transform:translateY(-1px)}.search-icon{position:absolute;right:20px;top:50%;transform:translateY(-50%);width:24px;height:24px;pointer-events:none;opacity:.5;transition:all .3s ease}.search-icon svg{width:100%;height:100%;fill:currentColor}.search-box:focus~.search-icon{opacity:.8;right:18px}.search-clear{position:absolute;right:50px;top:50%;transform:translateY(-50%);width:20px;height:20px;background:rgba(255,255,255,.1);border-radius:50%;display:none;align-items:center;justify-content:center;cursor:pointer;transition:all .2s ease}.search-clear:hover{background:rgba(255,255,255,.2);transform:translateY(-50%) scale(1.1)}.search-clear.visible{display:flex}.search-results{position:absolute;top:calc(100% + 12px);left:0;right:0;background:linear-gradient(135deg,rgba(32,32,32,.98),rgba(24,24,24,.98));border:1px solid rgba(255,255,255,.08);border-radius:16px;max-height:450px;overflow-y:auto;display:none;backdrop-filter:blur(20px);box-shadow:0 15px 40px rgba(0,0,0,.6),0 5px 15px rgba(0,0,0,.4);animation:slideDown .3s cubic-bezier(.4,0,.2,1)}@keyframes slideDown{from{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.search-results.active{display:block}.search-results::-webkit-scrollbar{width:6px}.search-results::-webkit-scrollbar-track{background:rgba(255,255,255,.05);border-radius:3px}.search-results::-webkit-scrollbar-thumb{background:rgba(229,9,20,.5);border-radius:3px}.search-results::-webkit-scrollbar-thumb:hover{background:rgba(229,9,20,.7)}.search-result-item{padding:14px 20px;cursor:pointer;transition:all .2s ease;display:flex;align-items:center;gap:16px;border-bottom:1px solid rgba(255,255,255,.03);min-height:80px}.search-result-item:last-child{border-bottom:none}.search-result-item:hover{background:linear-gradient(90deg,rgba(229,9,20,.15),transparent);padding-left:24px}.search-result-item.focused{background:linear-gradient(90deg,rgba(229,9,20,.25),rgba(229,9,20,.05));border-left:3px solid var(--primary-color);padding-left:17px}.search-result-poster{width:50px;height:70px;object-fit:cover;border-radius:6px;box-shadow:0 4px 10px rgba(0,0,0,.4);transition:transform .2s ease}.search-result-item:hover .search-result-poster{transform:scale(1.05)}.search-result-info{flex:1;display:flex;flex-direction:column;gap:4px}.search-result-title{font-size:16px;font-weight:500;color:rgba(255,255,255,.95)}.search-result-year{font-size:14px;color:rgba(255,255,255,.5)}.no-results{padding:30px 20px;text-align:center;color:rgba(255,255,255,.4);font-size:16px}.continue-watching-section{padding:30px 40px 20px;display:none}.continue-watching-section.active{display:block}.section-header{font-size:1.6rem;font-weight:600;margin-bottom:20px;color:var(--text-light);display:flex;align-items:center;justify-content:space-between}.clear-continue{font-size:1rem;color:var(--muted);cursor:pointer;padding:8px 16px;border-radius:20px;background:rgba(255,255,255,.05);transition:all .2s ease}.clear-continue:hover{background:rgba(255,255,255,.1);color:var(--text-light)}.continue-watching-row{display:flex;gap:20px;overflow-x:auto;padding:10px 0;scrollbar-width:none}.continue-watching-row::-webkit-scrollbar{display:none}.continue-card{flex:0 0 360px;background:var(--background-card);border-radius:var(--radius);overflow:hidden;cursor:pointer;transition:all .3s cubic-bezier(.4,0,.2,1);position:relative;border:3px solid transparent}.continue-card:hover{transform:scale(1.05);box-shadow:0 10px 30px rgba(0,0,0,.5)}.continue-card.focused{border-color:var(--primary-color);transform:scale(1.08);box-shadow:var(--focus-shadow)}.continue-thumbnail{position:relative;height:200px;background:linear-gradient(135deg,#333,#1a1a1a);overflow:hidden}.continue-thumbnail img{width:100%;height:100%;object-fit:cover}.continue-play-overlay{position:absolute;top:0;left:0;right:0;bottom:0;background:linear-gradient(to top,rgba(0,0,0,.9),transparent);display:flex;align-items:center;justify-content:center;opacity:0;transition:opacity .3s ease}.continue-card:hover .continue-play-overlay{opacity:1}.continue-play-btn{width:70px;height:70px;background:rgba(229,9,20,.95);border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:1.8rem;color:#fff;box-shadow:0 4px 12px rgba(0,0,0,.5)}.continue-progress{position:absolute;bottom:0;left:0;right:0;height:5px;background:rgba(255,255,255,.2)}.continue-progress-bar{height:100%;background:var(--primary-color);transition:width .3s ease}.continue-info{padding:18px}.continue-series-title{font-size:1rem;color:var(--muted);margin-bottom:4px}.continue-episode-title{font-size:1.2rem;font-weight:600;color:var(--text-light);margin-bottom:8px}.continue-meta{display:flex;align-items:center;gap:10px;font-size:.95rem;color:var(--muted)}.continue-remove{position:absolute;top:10px;right:10px;width:35px;height:35px;background:rgba(0,0,0,.7);border-radius:50%;display:flex;align-items:center;justify-content:center;color:#fff;opacity:0;transition:all .2s ease;cursor:pointer;font-size:1.2rem}.continue-card:hover .continue-remove{opacity:1}.continue-remove:hover{background:var(--primary-color);transform:scale(1.1)}.main-content{padding-top:10px}.all-series-header{padding:20px 40px 15px;font-size:1.6rem;font-weight:600}.grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:20px;padding:0 40px 40px;animation:fadeIn .5s ease-out}@keyframes fadeIn{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.card{background:0 0;border-radius:8px;overflow:hidden;cursor:pointer;transition:all .3s cubic-bezier(.4,0,.2,1);position:relative;border:3px solid transparent;outline:0}.card img{width:100%;height:300px;object-fit:cover;transition:transform .3s ease}.card-title{padding:14px;font-size:1rem;font-weight:500;background:linear-gradient(180deg,transparent,rgba(0,0,0,.8));position:absolute;bottom:0;left:0;right:0;color:#fff}.card.focused{border-color:var(--primary-color);transform:scale(1.12);box-shadow:var(--focus-shadow);z-index:5}.card.focused img{transform:scale(1.05)}.badge{position:absolute;top:10px;left:10px;background:var(--primary-color);padding:6px 14px;font-size:.85rem;border-radius:6px;font-weight:700;z-index:2;box-shadow:0 2px 4px rgba(0,0,0,.3)}.badge.doblado{background:#46d369}.badge.estreno{background:#ff6b35;animation:glow 2s ease-in-out infinite}@keyframes glow{0%,100%{box-shadow:0 0 5px currentColor}50%{box-shadow:0 0 20px currentColor}}.series-overlay{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:var(--background-dark);z-index:100;overflow-y:auto;animation:slideIn .3s ease-out}@keyframes slideIn{from{transform:translateX(100%)}to{transform:translateX(0)}}.series-banner{position:relative;width:100%;height:200px;overflow:hidden;background:linear-gradient(135deg,#1a1a1a,#0a0a0a)}@media screen and (min-width:1920px){.series-banner{height:240px}}@media screen and (min-width:2560px){.series-banner{height:280px}}@media screen and (min-width:3840px){.series-banner{height:320px}}.series-banner-image{width:100%;height:100%;object-fit:cover;object-position:center 25%;filter:brightness(.6);transform:scale(1.1)}.series-banner-gradient{position:absolute;bottom:0;left:0;right:0;height:80%;background:linear-gradient(to top,var(--background-dark) 0,rgba(20,20,20,.8) 30%,transparent 100%);pointer-events:none}.series-banner-info{position:absolute;bottom:20px;left:40px;right:40px;z-index:2}.series-banner-title{font-size:2rem;font-weight:700;text-shadow:2px 2px 8px rgba(0,0,0,.9);margin-bottom:8px;animation:fadeInUp .6s ease-out;letter-spacing:.5px}@media screen and (min-width:1920px){.series-banner-title{font-size:2.5rem}}@media screen and (min-width:3840px){.series-banner-title{font-size:3rem}}@keyframes fadeInUp{from{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}.series-banner-meta{display:flex;align-items:center;gap:20px;font-size:1rem;color:rgba(255,255,255,.8);animation:fadeInUp .8s ease-out}.series-banner-badge{display:inline-block;padding:6px 14px;background:var(--primary-color);border-radius:6px;font-size:.95rem;font-weight:700}.series-banner-play{display:none}.season-bar{display:flex;gap:20px;padding:15px 40px 20px;overflow-x:auto;scrollbar-width:none;background:linear-gradient(to bottom,rgba(20,20,20,.3),transparent);margin-top:-10px;position:relative;z-index:3}.season-bar::-webkit-scrollbar{display:none}.season{background:rgba(24,24,24,.85);border-radius:var(--radius);padding:12px 24px;color:var(--muted);border:2px solid transparent;transition:all var(--transition);cursor:pointer;font-weight:500;font-size:1rem;white-space:nowrap;box-shadow:0 4px 8px rgba(0,0,0,.3);outline:0;position:relative;backdrop-filter:blur(10px)}.season::after{content:'';position:absolute;bottom:0;left:50%;width:0;height:3px;background:var(--primary-color);transition:all .3s ease;transform:translateX(-50%)}.season.focused{border-color:var(--primary-color);color:var(--text-light);transform:scale(1.08);background:rgba(24,24,24,.95);box-shadow:0 8px 16px rgba(0,0,0,.5)}.season.active{background:var(--primary-color);color:#fff;box-shadow:0 6px 12px rgba(229,9,20,.4)}.season.active::after{width:100%}.episodes-container{background:var(--background-dark);padding-top:15px;min-height:400px}.episodes-row{position:relative;overflow:hidden}.episodes-track{display:flex;gap:16px;padding:0 40px 30px;transition:transform .4s cubic-bezier(.4,0,.2,1);justify-content:center;flex-wrap:wrap}.episode{flex:0 0 280px;background:var(--background-card);border-radius:var(--radius);border:3px solid transparent;transition:all var(--transition);display:flex;flex-direction:column;overflow:hidden;box-shadow:0 6px 12px rgba(0,0,0,.4);cursor:pointer;outline:0;position:relative}@media screen and (min-width:1920px){.episode{flex:0 0 320px}}@media screen and (min-width:3840px){.episode{flex:0 0 380px}}.episode::before{content:'';position:absolute;top:0;left:0;right:0;height:4px;background:linear-gradient(90deg,var(--primary-color),transparent);opacity:0;transition:opacity .3s ease}.episode.focused::before{opacity:1}.thumb{background:linear-gradient(135deg,#333,#1a1a1a);height:160px;display:flex;align-items:center;justify-content:center;color:var(--muted);font-size:1rem;position:relative;overflow:hidden}.thumb img{width:100%;height:100%;object-fit:cover}.ep-number{position:absolute;top:10px;left:10px;background:rgba(0,0,0,.85);color:#fff;padding:6px 10px;border-radius:6px;font-size:.85rem;font-weight:700}.episode.focused{border-color:var(--primary-color);transform:scale(1.08) translateY(-8px);box-shadow:var(--focus-shadow);z-index:5}.episode.bloqueado{opacity:.4;cursor:not-allowed;filter:grayscale(1)}.episode.bloqueado::after{content:"üîí";position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);font-size:2.5rem;z-index:10}.ep-info{padding:15px;background:linear-gradient(180deg,var(--background-card),rgba(0,0,0,.5))}.ep-title{font-size:1.1rem;font-weight:600;line-height:1.3}.play-icon{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:60px;height:60px;background:rgba(229,9,20,.95);border-radius:50%;display:flex;align-items:center;justify-content:center;opacity:0;transition:all .3s ease;box-shadow:0 4px 12px rgba(0,0,0,.5)}.episode.focused .play-icon{opacity:1;transform:translate(-50%,-50%) scale(1)}.episode:hover .play-icon{opacity:.9}.play-icon::after{content:"‚ñ∂";color:#fff;font-size:1.4rem;margin-left:4px}.nav-help{position:fixed;bottom:30px;left:50%;transform:translateX(-50%);background:rgba(0,0,0,.85);color:#fff;padding:12px 24px;border-radius:25px;font-size:1rem;opacity:0;transition:opacity .3s ease;pointer-events:none;z-index:200}.nav-help.show{opacity:1}.back-button{display:none}.close{display:none}.error-message{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background:rgba(229,9,20,.95);color:#fff;padding:24px 36px;border-radius:12px;z-index:1000;display:none;animation:shake .5s ease-in-out;font-size:1.1rem}@keyframes shake{0%,100%{transform:translate(-50%,-50%) rotate(0)}25%{transform:translate(-52%,-50%) rotate(-2deg)}75%{transform:translate(-48%,-50%) rotate(2deg)}}.error-message.show{display:block}@media screen and (min-width:1280px) and (max-width:1919px){.grid{grid-template-columns:repeat(auto-fill,minmax(180px,1fr))}.card img{height:280px}.episode{flex:0 0 260px}.series-banner{height:180px}}@media screen and (min-width:1920px) and (max-width:2559px){.grid{grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:24px}.card img{height:330px}.card-title{font-size:1.1rem;padding:16px}}@media screen and (min-width:2560px) and (max-width:3839px){.grid{grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:28px}.card img{height:380px}.card-title{font-size:1.2rem;padding:18px}}@media screen and (min-width:3840px){.grid{grid-template-columns:repeat(auto-fill,minmax(320px,1fr));gap:32px;padding:0 60px 60px}.card img{height:450px}.card-title{font-size:1.3rem;padding:20px}header{padding:30px 60px;min-height:100px}.logo{font-size:2.5rem}}@media (max-width:768px){.continue-watching-section,.episodes-track,.grid,.season-bar,header{padding-left:20px;padding-right:20px}.series-banner{height:160px}.series-banner-title{font-size:1.5rem}.series-banner-info{left:20px;right:20px;bottom:15px}.logo{font-size:1.4rem;margin-right:10px}.search-container{max-width:100%}.episode{flex:0 0 240px}.continue-card{flex:0 0 300px}.grid{grid-template-columns:repeat(auto-fill,minmax(140px,1fr));gap:12px}.card img{height:220px}.card.focused{transform:scale(1.08)}}@media (prefers-reduced-motion:reduce){*{animation-duration:.01ms!important;animation-iteration-count:1!important;transition-duration:.01ms!important}}@media screen and (min-width:1280px){.card.focused,.continue-card.focused,.episode.focused{box-shadow:0 0 0 4px var(--primary-color),var(--focus-shadow)}.season.focused{box-shadow:0 0 0 3px var(--primary-color)}}</style></head><body><div class="loader" id="loader"></div><header><div class="logo">SERIES+</div><div class="search-container"><div class="search-wrapper"><input type="text" class="search-box" id="searchBox" placeholder="Buscar..."><div class="search-clear" id="searchClear">√ó</div><div class="search-icon"><svg viewBox="0 0 24 24"><path d="M15.5 14h-.79l-.28-.27A6.471 6.471 0 0 0 16 9.5 6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/></svg></div><div class="search-results" id="searchResults"></div></div></div></header><button class="back-button" id="backButton"><span>‚Üê</span><span>Volver</span></button><section class="continue-watching-section" id="continueWatchingSection"><div class="section-header"><span>Seguir viendo</span><span class="clear-continue" id="clearContinue">Limpiar todo</span></div><div class="continue-watching-row" id="continueWatchingRow"></div></section><div class="main-content"><div class="all-series-header"></div><section class="grid" id="mainGrid"></section></div><div id="seriesOverlay" class="series-overlay"><span class="close" id="closeButton">√ó</span><div class="series-banner" id="seriesBanner"><img class="series-banner-image" id="seriesBannerImage" src="" alt=""><div class="series-banner-gradient"></div><div class="series-banner-info"><h1 class="series-banner-title" id="seriesBannerTitle"></h1><div class="series-banner-meta" id="seriesBannerMeta"></div></div><div class="series-banner-play" id="seriesBannerPlay">‚ñ∂</div></div><div class="season-bar" id="seasonBar"></div><div class="episodes-container"><div class="episodes-row"><div class="episodes-track" id="episodesTrack"></div></div></div></div><div class="nav-help" id="navHelp">Presiona ‚Üë para ir a la b√∫squeda</div><div class="error-message" id="errorMessage">Error cargando el contenido</div><script>class StreamingPlatform{constructor(){this.seriesData={},this.cards=[],this.continueWatchingData=[],this.index=0,this.currentSeries=null,this.currentSeriesId=null,this.currentSeason=0,this.focusMode="grid",this.seasonFocus=0,this.episodeFocus=0,this.continueFocus=0,this.scrollX=0,this.searchTimeout=null,this.searchResultIndex=0,this.dataUrl="series-data.json",this.refreshInterval=null,this.navHelpTimeout=null,this.initializeElements(),this.loadContinueWatching(),this.loadData()}initializeElements(){this.loader=document.getElementById("loader"),this.mainGrid=document.getElementById("mainGrid"),this.seriesOverlay=document.getElementById("seriesOverlay"),this.backButton=document.getElementById("backButton"),this.closeButton=document.getElementById("closeButton"),this.seasonBar=document.getElementById("seasonBar"),this.episodesTrack=document.getElementById("episodesTrack"),this.errorMessage=document.getElementById("errorMessage"),this.searchBox=document.getElementById("searchBox"),this.searchResults=document.getElementById("searchResults"),this.searchClear=document.getElementById("searchClear"),this.navHelp=document.getElementById("navHelp"),this.continueWatchingSection=document.getElementById("continueWatchingSection"),this.continueWatchingRow=document.getElementById("continueWatchingRow"),this.clearContinue=document.getElementById("clearContinue"),this.seriesBanner=document.getElementById("seriesBanner"),this.seriesBannerImage=document.getElementById("seriesBannerImage"),this.seriesBannerTitle=document.getElementById("seriesBannerTitle"),this.seriesBannerMeta=document.getElementById("seriesBannerMeta"),this.seriesBannerPlay=document.getElementById("seriesBannerPlay"),this.backButton.addEventListener("click",()=>this.closeModal()),this.closeButton.addEventListener("click",()=>this.closeModal()),document.addEventListener("keydown",e=>this.handleKeyboard(e)),this.seriesBannerPlay.addEventListener("click",()=>{this.playFirstAvailableEpisode()}),this.clearContinue.addEventListener("click",()=>{this.clearContinueWatching()}),this.searchBox.addEventListener("input",e=>this.handleSearch(e)),this.searchBox.addEventListener("focus",()=>{this.focusMode="search",this.searchBox.classList.add("focused"),this.showSearchResults()}),this.searchBox.addEventListener("blur",()=>{setTimeout(()=>{"search"!==this.focusMode||this.searchResults.contains(document.activeElement)||(this.hideSearchResults(),this.searchBox.classList.remove("focused"),this.focusMode=this.continueWatchingData.length>0?"continue":"grid","continue"===this.focusMode?(this.continueFocus=0,this.updateContinueFocus()):this.focusCard())},200)}),this.searchClear.addEventListener("click",()=>{this.searchBox.value="",this.searchClear.classList.remove("visible"),this.hideSearchResults(),this.searchBox.focus()}),this.refreshInterval=setInterval(()=>this.refreshData(),3e5)}createBannerFromPoster(e){return e}updateSeriesBanner(e){const s=this.createBannerFromPoster(e.poster||"https://via.placeholder.com/1920x400");this.seriesBannerImage.src=s,this.seriesBannerImage.alt=e.displayTitle||e.title,this.seriesBannerImage.onerror=()=>{this.seriesBannerImage.src="https://via.placeholder.com/1920x400?text="+encodeURIComponent(e.displayTitle||e.title)},this.seriesBannerTitle.textContent=e.displayTitle||e.title,this.seriesBannerMeta.innerHTML="",e.badge&&(s=document.createElement("span"),s.className="series-banner-badge",s.textContent=e.badge,"doblado"===e.badgeType?s.style.background="#46d369":"estreno"===e.badgeType&&(s.style.background="#ff6b35"),this.seriesBannerMeta.appendChild(s));const t=e.seasons?Object.keys(e.seasons).length:0;let i=0;e.seasons&&Object.values(e.seasons).forEach(e=>{i+=e?e.length:0}),t>0&&((t=document.createElement("span")).textContent=`${t} Temporada${1<t?"s":""} ‚Ä¢ ${i} Episodio${1<i?"s":""}`,this.seriesBannerMeta.appendChild(t))}playFirstAvailableEpisode(){if(!this.currentSeries||!this.currentSeries.seasons)return;const e=Object.keys(this.currentSeries.seasons);for(let s=0;s<e.length;s++){const t=this.currentSeries.seasons[e[s]];if(t&&0<t.length)for(let e=0;e<t.length;e++){const i=t[e];if(!i.locked&&i.url)return this.saveContinueWatching(this.currentSeriesId,this.currentSeries.displayTitle||this.currentSeries.title,s,e,i.title,0,i.thumbnail),void this.playEpisode(i.url)}}this.showError("No hay episodios disponibles para reproducir")}loadContinueWatching(){const e=localStorage.getItem("continueWatching");if(e)try{this.continueWatchingData=JSON.parse(e),this.renderContinueWatching()}catch(e){this.continueWatchingData=[]}}saveContinueWatching(e,s,t,i,a,r=0,n=null){const o=this.continueWatchingData.findIndex(s=>s.seriesId===e&&s.seasonIndex===t&&s.episodeIndex===i),h={seriesId:e,seriesTitle:s,seasonIndex:t,episodeIndex:i,episodeTitle:a,progress:r||100*Math.random(),thumbnail:n,timestamp:(new Date).toISOString()};-1!==o?this.continueWatchingData[o]=h:(this.continueWatchingData.unshift(h),10<this.continueWatchingData.length&&(this.continueWatchingData=this.continueWatchingData.slice(0,10))),localStorage.setItem("continueWatching",JSON.stringify(this.continueWatchingData)),this.renderContinueWatching()}renderContinueWatching(){if(0===this.continueWatchingData.length)return void this.continueWatchingSection.classList.remove("active");this.continueWatchingSection.classList.add("active"),this.continueWatchingRow.innerHTML="",this.continueWatchingData.forEach((s,t)=>{const e=document.createElement("div");e.className="continue-card",e.dataset.index=t;const i=document.createElement("div");i.className="continue-thumbnail",s.thumbnail&&(a=document.createElement("img"),a.src=s.thumbnail,a.alt=s.episodeTitle,a.onerror=()=>{a.style.display="none"},i.appendChild(a));var a=document.createElement("div");a.className="continue-play-overlay",a.innerHTML='<div class="continue-play-btn">‚ñ∂</div>',i.appendChild(a),a=document.createElement("div"),a.className="continue-progress";const r=document.createElement("div");r.className="continue-progress-bar",r.style.width=`${s.progress}%`,a.appendChild(r),i.appendChild(a),e.appendChild(i);const n=document.createElement("div");n.className="continue-info";const o=document.createElement("div");o.className="continue-series-title",o.textContent=s.seriesTitle,n.appendChild(o);const h=document.createElement("div");h.className="continue-episode-title",h.textContent=s.episodeTitle,n.appendChild(h);const c=document.createElement("div");c.className="continue-meta",c.innerHTML=`
                <span>T${s.seasonIndex+1}:E${s.episodeIndex+1}</span>
                <span>‚Ä¢</span>
                <span>${Math.round(s.progress)}% visto</span>
            `,n.appendChild(c),e.appendChild(n);const l=document.createElement("div");l.className="continue-remove",l.innerHTML="√ó",l.addEventListener("click",e=>{e.stopPropagation(),this.removeContinueItem(t)}),e.appendChild(l),e.addEventListener("click",()=>{this.resumeWatching(s)}),this.continueWatchingRow.appendChild(e)})}removeContinueItem(e){this.continueWatchingData.splice(e,1),localStorage.setItem("continueWatching",JSON.stringify(this.continueWatchingData)),this.renderContinueWatching()}clearContinueWatching(){confirm("¬øEliminar todo el historial de \"Seguir viendo\"?")&&(this.continueWatchingData=[],localStorage.removeItem("continueWatching"),this.renderContinueWatching(),this.focusMode="grid",this.index=0,this.focusCard())}resumeWatching(e){this.openSeriesDetail(e.seriesId),setTimeout(()=>{this.currentSeason=e.seasonIndex,this.episodeFocus=e.episodeIndex,this.renderSeasons(),this.renderEpisodes();const s=this.currentSeries.seasons[Object.keys(this.currentSeries.seasons)[e.seasonIndex]];var t;s&&s[e.episodeIndex]&&(t=s[e.episodeIndex]).url&&this.playEpisode(t.url)},100)}updateContinueFocus(){const e=this.continueWatchingRow.querySelectorAll(".continue-card");e.forEach((e,s)=>{e.classList.toggle("focused",s===this.continueFocus),s===this.continueFocus&&e.scrollIntoView({behavior:"smooth",block:"nearest",inline:"center"})})}async loadData(){try{this.showLoader(!0);const e=await fetch(this.dataUrl);if(!e.ok)throw new Error("Error loading data");var s=await e.json();this.processSeriesData(s),this.renderGrid()}catch(e){console.error("Error loading series data:",e),this.showError("Error cargando las series. Usando datos de respaldo."),this.loadFallbackData()}finally{this.showLoader(!1)}}processSeriesData(e){this.seriesData={},e.series&&Array.isArray(e.series)&&e.series.forEach(e=>{this.seriesData[e.id]={title:e.title,displayTitle:e.displayTitle||e.title,poster:e.poster,badge:e.badge,badgeType:e.badgeType,seasons:e.seasons||{}}})}loadFallbackData(){this.seriesData={"fallback-series":{title:"SERIE DE EJEMPLO",displayTitle:"Serie de Ejemplo",poster:"https://via.placeholder.com/300x450?text=Sin+Imagen",badge:"DEMO",badgeType:"",seasons:{"Temporada 1":[{title:"Episodio 1",url:"#",thumbnail:"https://via.placeholder.com/320x180?text=Episodio+1"}]}}},this.renderGrid()}renderGrid(){this.mainGrid.innerHTML="",this.cards=[],Object.entries(this.seriesData).forEach(([e,s],t)=>{var i=this.createCard(e,s);this.mainGrid.appendChild(i),this.cards.push(i),i.style.animationDelay=.05*t+"s"}),0<this.cards.length&&(this.index=0,"grid"===this.focusMode&&this.focusCard())}createCard(e,s){const t=document.createElement("article");t.className="card",t.dataset.series=e,t.tabIndex=-1,s.badge&&(i=document.createElement("span"),i.className=`badge ${s.badgeType||""}`,i.textContent=s.badge,t.appendChild(i));const i=document.createElement("img");i.src=s.poster||"https://via.placeholder.com/300x450?text=No+Image",i.alt=s.displayTitle||s.title,i.loading="lazy",i.onerror=()=>{i.src="https://via.placeholder.com/300x450?text="+encodeURIComponent(s.displayTitle||s.title)},t.appendChild(i);const a=document.createElement("div");return a.className="card-title",a.textContent=s.displayTitle||s.title,t.appendChild(a),t.addEventListener("click",()=>this.openSeriesDetail(e)),t}handleSearch(e){var s=e.target.value.toLowerCase().trim();s?this.searchClear.classList.add("visible"):this.searchClear.classList.remove("visible"),clearTimeout(this.searchTimeout),s?this.searchTimeout=setTimeout(()=>{this.performSearch(s)},300):this.hideSearchResults()}performSearch(t){const i=[];Object.entries(this.seriesData).forEach(([e,s])=>{((s.displayTitle||s.title||"").toLowerCase().includes(t)||(s.title||"").toLowerCase().includes(t))&&i.push({id:e,...s})}),this.displaySearchResults(i,t)}displaySearchResults(e,s){this.searchResults.innerHTML="",this.searchResultIndex=0,0===e.length?this.searchResults.innerHTML=`
                <div class="no-results">
                    No se encontraron resultados para "${s}"
                </div>
            `:e.forEach((e,s)=>{const t=document.createElement("div");t.className="search-result-item",t.dataset.resultIndex=s,t.dataset.seriesId=e.id;const i=document.createElement("img");i.src=e.poster||"https://via.placeholder.com/40x60",i.alt=e.displayTitle||e.title,i.className="search-result-poster",i.onerror=()=>{i.src="https://via.placeholder.com/40x60"};const a=document.createElement("div");a.className="search-result-info";const r=document.createElement("div");r.className="search-result-title",r.textContent=e.displayTitle||e.title,a.appendChild(r),t.appendChild(i),t.appendChild(a),t.addEventListener("click",()=>{this.openSeriesDetail(e.id),this.hideSearchResults(),this.searchBox.value="",this.searchBox.classList.remove("focused"),this.searchClear.classList.remove("visible")}),this.searchResults.appendChild(t)}),this.searchResults.classList.add("active"),this.updateSearchResultFocus()}updateSearchResultFocus(){const e=this.searchResults.querySelectorAll(".search-result-item");e.forEach((e,s)=>{e.classList.toggle("focused",s===this.searchResultIndex),s===this.searchResultIndex&&e.scrollIntoView({behavior:"smooth",block:"nearest"})})}showSearchResults(){this.searchBox.value.trim()&&this.performSearch(this.searchBox.value.toLowerCase().trim())}hideSearchResults(){this.searchResults.classList.remove("active")}focusCard(){0!==this.cards.length&&(this.cards.forEach((e,s)=>{e.classList.remove("focused"),e.tabIndex=-1}),(e=this.cards[this.index])&&(e.classList.add("focused"),e.tabIndex=0,e.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})));var e}openSeriesDetail(e){this.currentSeries=this.seriesData[e],this.currentSeriesId=e,this.currentSeries&&(this.mainGrid.parentElement.style.display="none",this.continueWatchingSection.style.display="none",this.seriesOverlay.style.display="block",this.backButton.classList.add("visible"),this.updateSeriesBanner(this.currentSeries),this.currentSeason=0,this.focusMode="season",this.seasonFocus=0,this.episodeFocus=0,this.renderSeasons(),this.renderEpisodes(),history.pushState({modal:!0},"","#"+e))}renderSeasons(){if(this.seasonBar.innerHTML="",!this.currentSeries.seasons||0===Object.keys(this.currentSeries.seasons).length){const e=document.createElement("div");return e.className="season active",e.textContent="Sin temporadas disponibles",void this.seasonBar.appendChild(e)}Object.keys(this.currentSeries.seasons).forEach((e,s)=>{const t=document.createElement("div");t.className="season",t.tabIndex=-1,s===this.currentSeason&&t.classList.add("active"),t.textContent=e,t.dataset.index=s,t.addEventListener("click",()=>{this.currentSeason=s,this.episodeFocus=0,this.renderSeasons(),this.renderEpisodes()}),this.seasonBar.appendChild(t)}),this.updateSeriesFocus()}renderEpisodes(){if(this.episodesTrack.innerHTML="",!this.currentSeries.seasons||0===Object.keys(this.currentSeries.seasons).length){const e=document.createElement("div");return e.style.padding="40px",e.style.color="var(--muted)",e.textContent="No hay episodios disponibles",void this.episodesTrack.appendChild(e)}const e=Object.keys(this.currentSeries.seasons),a=this.currentSeries.seasons[e[this.currentSeason]];if(!a||0===a.length){const e=document.createElement("div");return e.style.padding="40px",e.style.color="var(--muted)",e.textContent="No hay episodios en esta temporada",void this.episodesTrack.appendChild(e)}a.forEach((s,t)=>{const e=document.createElement("div");e.className="episode",e.tabIndex=-1,s.locked&&e.classList.add("bloqueado");const i=document.createElement("div");i.className="thumb";const a=document.createElement("div");if(a.className="ep-number",a.textContent=""+(t+1),i.appendChild(a),s.thumbnail){const e=document.createElement("img");e.src=s.thumbnail,e.alt=s.title,e.onerror=()=>{e.style.display="none";const s=document.createElement("span");s.textContent=s.title,i.appendChild(s)},i.appendChild(e)}else{const e=document.createElement("span");e.textContent=s.title,i.appendChild(e)}const r=document.createElement("div");r.className="play-icon",i.appendChild(r),e.appendChild(i);const n=document.createElement("div");n.className="ep-info";const o=document.createElement("div");o.className="ep-title",o.textContent=s.title,n.appendChild(o),e.appendChild(n),e.dataset.index=t,s.locked||e.addEventListener("click",()=>{s.url&&(this.saveContinueWatching(this.currentSeriesId,this.currentSeries.displayTitle||this.currentSeries.title,this.currentSeason,t,s.title,0,s.thumbnail),this.playEpisode(s.url))}),this.episodesTrack.appendChild(e)}),this.scrollX=0,this.episodesTrack.style.transform="translateX(0)",this.updateSeriesFocus()}updateSeriesFocus(){const e=this.seasonBar.querySelectorAll(".season"),s=(e.forEach((e,s)=>{e.classList.toggle("focused","season"===this.focusMode&&s===this.seasonFocus),e.tabIndex="season"===this.focusMode&&s===this.seasonFocus?0:-1}),this.episodesTrack.querySelectorAll(".episode"));s.forEach((e,s)=>{e.classList.toggle("focused","episode"===this.focusMode&&s===this.episodeFocus),e.tabIndex="episode"===this.focusMode&&s===this.episodeFocus?0:-1}),"season"===this.focusMode&&e[this.seasonFocus]&&e[this.seasonFocus].scrollIntoView({behavior:"smooth",block:"nearest",inline:"center"}),this.updateSeriesScroll()}updateSeriesScroll(){if("episode"===this.focusMode){const t=304,i=window.innerWidth,e=this.episodesTrack.querySelectorAll(".episode");if(e[this.episodeFocus]){var s=e[this.episodeFocus].getBoundingClientRect(),a=this.episodesTrack.parentElement.getBoundingClientRect();if(s.left<a.left||s.right>a.right){this.scrollX=Math.max(0,this.episodeFocus*t-i/2+t/2);s=e.length*t,s=Math.max(0,s-i+80);this.scrollX=Math.min(this.scrollX,s),this.episodesTrack.style.transform=`translateX(${-this.scrollX}px)`}}}}playEpisode(e){e&&"#"!==e?(this.saveProgress(),window.location.href=e):this.showError("URL del episodio no disponible")}saveProgress(){var e;this.currentSeries&&(e={seriesId:this.currentSeriesId,season:this.currentSeason,episode:this.episodeFocus,timestamp:(new Date).toISOString()},localStorage.setItem("lastWatched",JSON.stringify(e)))}closeModal(){var e;this.seriesOverlay.style.display="none",this.backButton.classList.remove("visible"),this.mainGrid.parentElement.style.display="block",0<this.continueWatchingData.length&&(this.continueWatchingSection.style.display="block"),this.currentSeriesId&&-1!==(e=this.cards.findIndex(e=>e.dataset.series===this.currentSeriesId))&&(this.index=e,this.focusCard()),this.focusMode="grid",this.currentSeriesId=null,history.replaceState(null,""," ")}showNavHelp(e){clearTimeout(this.navHelpTimeout),this.navHelp.textContent=e,this.navHelp.classList.add("show"),this.navHelpTimeout=setTimeout(()=>{this.navHelp.classList.remove("show")},2e3)}handleKeyboard(e){if("continue"===this.focusMode){const s=this.continueWatchingRow.querySelectorAll(".continue-card");switch(e.key){case"ArrowRight":e.preventDefault(),this.continueFocus=Math.min(this.continueFocus+1,s.length-1),this.updateContinueFocus();break;case"ArrowLeft":e.preventDefault(),this.continueFocus=Math.max(this.continueFocus-1,0),this.updateContinueFocus();break;case"ArrowDown":e.preventDefault(),this.focusMode="grid",this.index=0,this.focusCard();break;case"ArrowUp":e.preventDefault(),this.focusMode="search",this.searchBox.focus(),this.searchBox.classList.add("focused");break;case"Enter":e.preventDefault(),s[this.continueFocus]&&s[this.continueFocus].click()}}else if("ArrowUp"===e.key&&"grid"===this.focusMode){if(e.preventDefault(),0<this.continueWatchingData.length&&this.index<this.getGridWidth())this.focusMode="continue",this.continueFocus=0,this.updateContinueFocus();else if(this.index<this.getGridWidth())this.focusMode="search",this.searchBox.focus(),this.searchBox.classList.add("focused"),this.showNavHelp("B√∫squeda activa");else{const e=this.getGridWidth();this.index=Math.max(this.index-e,0),this.focusCard()}}else if("ArrowDown"!==e.key||"search"!==this.focusMode||this.searchResults.classList.contains("active"))if("search"===this.focusMode&&this.searchResults.classList.contains("active")){const s=this.searchResults.querySelectorAll(".search-result-item");switch(e.key){case"ArrowDown":e.preventDefault(),0<s.length&&(this.searchResultIndex=(this.searchResultIndex+1)%s.length,this.updateSearchResultFocus());break;case"ArrowUp":e.preventDefault(),0<s.length&&(this.searchResultIndex=(this.searchResultIndex-1+s.length)%s.length,this.updateSearchResultFocus());break;case"ArrowRight":e.preventDefault(),0<s.length&&(this.searchResultIndex=Math.min(this.searchResultIndex+3,s.length-1),this.updateSearchResultFocus());break;case"ArrowLeft":e.preventDefault(),0<s.length&&(this.searchResultIndex=Math.max(this.searchResultIndex-3,0),this.updateSearchResultFocus());break;case"Enter":if(e.preventDefault(),s[this.searchResultIndex]){const e=s[this.searchResultIndex].dataset.seriesId;this.openSeriesDetail(e),this.hideSearchResults(),this.searchBox.value="",this.searchBox.classList.remove("focused"),this.searchClear.classList.remove("visible")}break;case"Escape":e.preventDefault(),this.hideSearchResults(),this.searchBox.blur(),this.searchBox.classList.remove("focused"),this.searchBox.value="",this.searchClear.classList.remove("visible"),this.focusMode="grid",this.focusCard();break;case"Home":e.preventDefault(),0<s.length&&(this.searchResultIndex=0,this.updateSearchResultFocus());break;case"End":e.preventDefault(),0<s.length&&(this.searchResultIndex=s.length-1,this.updateSearchResultFocus());break;case"PageDown":e.preventDefault(),0<s.length&&(this.searchResultIndex=Math.min(this.searchResultIndex+5,s.length-1),this.updateSearchResultFocus());break;case"PageUp":e.preventDefault(),0<s.length&&(this.searchResultIndex=Math.max(this.searchResultIndex-5,0),this.updateSearchResultFocus());break;case"Tab":e.shiftKey&&(e.preventDefault(),this.searchBox.focus())}}else e.preventDefault(),this.hideSearchResults(),this.searchBox.blur(),this.searchBox.classList.remove("focused"),0<this.continueWatchingData.length?(this.focusMode="continue",this.continueFocus=0,this.updateContinueFocus()):(this.focusMode="grid",this.index=0,this.focusCard());else["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Enter","Escape","Backspace"].includes(e.key)&&("search"!==this.focusMode||"Escape"===e.key)&&e.preventDefault(),"block"===this.seriesOverlay.style.display?this.handleSeriesNavigation(e):"grid"===this.focusMode&&this.handleGridNavigation(e)}getGridWidth(){return Math.floor(this.mainGrid.offsetWidth/(this.cards[0]?.offsetWidth||200))}handleGridNavigation(e){const s=this.getGridWidth();switch(e.key){case"ArrowRight":this.index=(this.index+1)%this.cards.length;break;case"ArrowLeft":this.index=(this.index-1+this.cards.length)%this.cards.length;break;case"ArrowDown":this.index=Math.min(this.index+s,this.cards.length-1);break;case"Enter":case" ":this.cards[this.index]&&this.cards[this.index].click();break;case"/":e.preventDefault(),this.focusMode="search",this.searchBox.focus(),this.searchBox.classList.add("focused")}"grid"===this.focusMode&&this.focusCard()}handleSeriesNavigation(e){if(this.currentSeries&&this.currentSeries.seasons){const s=Object.keys(this.currentSeries.seasons);if("season"===this.focusMode){const t=s.length;switch(e.key){case"ArrowRight":this.seasonFocus=Math.min(this.seasonFocus+1,t-1);break;case"ArrowLeft":this.seasonFocus=Math.max(this.seasonFocus-1,0);break;case"ArrowDown":case"Enter":case" ":this.currentSeason=this.seasonFocus,this.focusMode="episode",this.episodeFocus=0,this.renderSeasons(),this.renderEpisodes()}}else if("episode"===this.focusMode){const t=this.currentSeries.seasons[s[this.currentSeason]];if(!t)return;const i=t.length;switch(e.key){case"ArrowRight":this.episodeFocus=Math.min(this.episodeFocus+1,i-1);break;case"ArrowLeft":this.episodeFocus=Math.max(this.episodeFocus-1,0);break;case"ArrowUp":this.focusMode="season",this.seasonFocus=this.currentSeason;break;case"Enter":case" ":const e=t[this.episodeFocus];e.locked||!e.url?e.locked&&this.showError("Este episodio est√° bloqueado"):(this.saveContinueWatching(this.currentSeriesId,this.currentSeries.displayTitle||this.currentSeries.title,this.currentSeason,this.episodeFocus,e.title,0,e.thumbnail),this.playEpisode(e.url))}}"Escape"!==e.key&&"Backspace"!==e.key?"season"!==this.focusMode&&"episode"!==this.focusMode||this.updateSeriesFocus():"episode"===this.focusMode?(this.focusMode="season",this.seasonFocus=this.currentSeason):this.closeModal()}}showLoader(e){this.loader&&this.loader.classList.toggle("hidden",!e)}showError(e){this.errorMessage.textContent=e,this.errorMessage.classList.add("show"),setTimeout(()=>{this.errorMessage.classList.remove("show")},3e3)}async refreshData(){console.log("Actualizando datos de series..."),await this.loadData()}destroy(){this.refreshInterval&&clearInterval(this.refreshInterval),document.removeEventListener("keydown",this.handleKeyboard)}}let platform=null;document.addEventListener("DOMContentLoaded",()=>{platform=new StreamingPlatform,window.addEventListener("popstate",e=>{"block"===platform.seriesOverlay.style.display&&platform.closeModal()}),window.navigator&&window.navigator.userAgent&&/TV|television|smarttv|webOS|Tizen/i.test(window.navigator.userAgent)&&(document.body.classList.add("tv-mode"),console.log("TV Mode detected")),window.streamingPlatform=platform}),document.addEventListener("visibilitychange",()=>{document.hidden&&platform?console.log("P√°gina oculta, pausando actividades"):platform&&console.log("P√°gina visible, reanudando actividades")});</script></body></html>




