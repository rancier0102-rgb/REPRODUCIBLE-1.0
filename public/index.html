<!DOCTYPE html>
<html lang="es" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    
    <!-- Metadatos b√°sicos -->
    <title>TV Cinema - Tu cine en casa</title>
    <meta name="description" content="Disfruta del mejor contenido de pel√≠culas y series en tu Smart TV. Streaming en 4K, cat√°logo actualizado y experiencia optimizada para televisi√≥n.">
    <meta name="keywords" content="streaming, pel√≠culas, series, smart tv, 4k, hdr, cine, entretenimiento">
    <meta name="author" content="TV Cinema">
    <meta name="robots" content="index, follow">
    
    <!-- PWA & Mobile -->
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="TV Cinema">
    <meta name="application-name" content="TV Cinema">
    <meta name="theme-color" content="#0a0a0a">
    <meta name="color-scheme" content="dark light">
    
    <!-- TV Specific Meta -->
    <meta name="tv-app" content="yes">
    <meta name="tv-input" content="remote">
    <meta name="tv-resolution" content="1080p, 4k">
    <meta name="screen-orientation" content="landscape">
    
    <!-- Manifest -->
    <link rel="manifest" href="/manifest.json">
    
    <!-- Icons -->
    <link rel="icon" type="image/x-icon" href="/images/favicon.ico">
    <link rel="icon" type="image/png" sizes="16x16" href="/images/icons/icon-16x16.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/images/icons/icon-32x32.png">
    <link rel="icon" type="image/png" sizes="192x192" href="/images/icons/icon-192x192.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/images/icons/apple-touch-icon.png">
    
    <!-- Splash Screens for iOS -->
    <link rel="apple-touch-startup-image" href="/images/splash/splash-2048x2732.png" 
          media="(device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2)">
    <link rel="apple-touch-startup-image" href="/images/splash/splash-1668x2388.png" 
          media="(device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2)">
    
    <!-- TV Platform Specific -->
    <!-- WebOS -->
    <meta name="webos-theme-color" content="#0a0a0a">
    
    <!-- Tizen -->
    <meta name="tizen-application-id" content="TVCinema">
    <meta name="tizen-setting-context-menu" content="disable">
    
    <!-- Android TV -->
    <meta name="google-site-verification" content="your-verification-code">
    
    <!-- Preconnect to optimize loading -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="dns-prefetch" href="//cdn.tvcinema.com">
    
    <!-- Critical CSS (inline for performance) -->
    <style>
        :root {
            --tv-safe-zone-x: 60px;
            --tv-safe-zone-y: 40px;
            --color-background: #0a0a0a;
            --color-text: #ffffff;
            --color-primary: #00a8ff;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        html, body {
            width: 100%;
            height: 100%;
            overflow: hidden;
            background: var(--color-background);
            color: var(--color-text);
            font-family: -apple-system, system-ui, sans-serif;
        }
        
        #loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--color-background);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            transition: opacity 0.3s ease;
        }
        
        #loading-screen.fade-out {
            opacity: 0;
            pointer-events: none;
        }
        
        .loading-logo {
            width: 200px;
            height: 200px;
            margin-bottom: 40px;
            animation: pulse 2s ease-in-out infinite;
        }
        
        .loading-spinner {
            width: 60px;
            height: 60px;
            border: 4px solid rgba(255, 255, 255, 0.1);
            border-top-color: var(--color-primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        .loading-text {
            margin-top: 20px;
            font-size: 24px;
            opacity: 0.8;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); opacity: 1; }
            50% { transform: scale(0.95); opacity: 0.8; }
        }
        
        .tv-container {
            position: absolute;
            top: var(--tv-safe-zone-y);
            right: var(--tv-safe-zone-x);
            bottom: var(--tv-safe-zone-y);
            left: var(--tv-safe-zone-x);
            opacity: 0;
            transition: opacity 0.5s ease;
        }
        
        .tv-container.ready {
            opacity: 1;
        }
        
        /* No JS fallback */
        .no-js {
            display: flex;
            align-items: center;
            justify-content: center;
            height: 100vh;
            text-align: center;
            padding: 40px;
        }
        
        .no-js-message {
            font-size: 32px;
            line-height: 1.5;
        }
    </style>
    
    <!-- Stylesheets (loaded asynchronously) -->
    <link rel="preload" href="/css/tv-layout.css" as="style">
    <link rel="preload" href="/css/animations.css" as="style">
    <link rel="stylesheet" href="/css/tv-layout.css">
    <link rel="stylesheet" href="/css/animations.css">
    
    <!-- Theme CSS -->
    <link rel="stylesheet" href="/css/themes/dark.css" media="(prefers-color-scheme: dark)">
    <link rel="stylesheet" href="/css/themes/light.css" media="(prefers-color-scheme: light)">
    
    <!-- Fonts -->
    <link rel="preload" href="/fonts/main.woff2" as="font" type="font/woff2" crossorigin>
    
    <!-- JavaScript Modules -->
    <link rel="modulepreload" href="/js/app.js">
    <link rel="modulepreload" href="/js/player.js">
    <link rel="modulepreload" href="/js/navigation.js">
</head>
<body>
    <!-- Loading Screen -->
    <div id="loading-screen">
        <img src="/images/logo.svg" alt="TV Cinema" class="loading-logo">
        <div class="loading-spinner"></div>
        <div class="loading-text">Cargando...</div>
    </div>
    
    <!-- No JavaScript Fallback -->
    <noscript>
        <div class="no-js">
            <div class="no-js-message">
                <h1>JavaScript Requerido</h1>
                <p>TV Cinema requiere JavaScript para funcionar correctamente.</p>
                <p>Por favor, habilita JavaScript en tu navegador o Smart TV.</p>
            </div>
        </div>
    </noscript>
    
    <!-- Main TV Container -->
    <div class="tv-container" id="app-container">
        <!-- TV Layout -->
        <div class="tv-layout" id="tv-layout">
            
            <!-- Sidebar Navigation -->
            <aside class="tv-sidebar" id="tv-sidebar" role="navigation" aria-label="Navegaci√≥n principal">
                <div class="tv-sidebar-logo">
                    <img src="/images/logo.svg" alt="TV Cinema" width="160" height="60">
                </div>
                
                <nav class="tv-nav">
                    <ul class="tv-nav-section" role="menubar">
                        <li class="tv-nav-item" role="none">
                            <a href="#home" class="tv-nav-link active" role="menuitem" 
                               data-focusable="true" data-nav-id="home" tabindex="0">
                                <span class="tv-nav-icon">üè†</span>
                                <span>Inicio</span>
                            </a>
                        </li>
                        <li class="tv-nav-item" role="none">
                            <a href="#movies" class="tv-nav-link" role="menuitem" 
                               data-focusable="true" data-nav-id="movies" tabindex="-1">
                                <span class="tv-nav-icon">üé¨</span>
                                <span>Pel√≠culas</span>
                            </a>
                        </li>
                        <li class="tv-nav-item" role="none">
                            <a href="#series" class="tv-nav-link" role="menuitem" 
                               data-focusable="true" data-nav-id="series" tabindex="-1">
                                <span class="tv-nav-icon">üì∫</span>
                                <span>Series</span>
                            </a>
                        </li>
                        <li class="tv-nav-item" role="none">
                            <a href="#categories" class="tv-nav-link" role="menuitem" 
                               data-focusable="true" data-nav-id="categories" tabindex="-1">
                                <span class="tv-nav-icon">üìÅ</span>
                                <span>Categor√≠as</span>
                            </a>
                        </li>
                    </ul>
                    
                    <div class="tv-nav-title">Personal</div>
                    <ul class="tv-nav-section" role="menubar">
                        <li class="tv-nav-item" role="none">
                            <a href="#mylist" class="tv-nav-link" role="menuitem" 
                               data-focusable="true" data-nav-id="mylist" tabindex="-1">
                                <span class="tv-nav-icon">‚ù§Ô∏è</span>
                                <span>Mi Lista</span>
                            </a>
                        </li>
                        <li class="tv-nav-item" role="none">
                            <a href="#continue" class="tv-nav-link" role="menuitem" 
                               data-focusable="true" data-nav-id="continue" tabindex="-1">
                                <span class="tv-nav-icon">‚ñ∂Ô∏è</span>
                                <span>Continuar</span>
                            </a>
                        </li>
                        <li class="tv-nav-item" role="none">
                            <a href="#settings" class="tv-nav-link" role="menuitem" 
                               data-focusable="true" data-nav-id="settings" tabindex="-1">
                                <span class="tv-nav-icon">‚öôÔ∏è</span>
                                <span>Ajustes</span>
                            </a>
                        </li>
                    </ul>
                </nav>
            </aside>
            
            <!-- Header -->
            <header class="tv-header" id="tv-header">
                <div class="tv-search" role="search">
                    <span class="tv-search-icon">üîç</span>
                    <input type="search" 
                           class="tv-search-input" 
                           placeholder="Buscar pel√≠culas, series, actores..." 
                           aria-label="Buscar contenido"
                           data-focusable="true"
                           tabindex="-1">
                </div>
                
                <div class="tv-header-actions">
                    <button class="tv-header-button" 
                            data-focusable="true" 
                            tabindex="-1" 
                            aria-label="Notificaciones">
                        <span>üîî</span>
                    </button>
                    <button class="tv-header-button" 
                            data-focusable="true" 
                            tabindex="-1" 
                            aria-label="Perfil">
                        <span>üë§</span>
                    </button>
                </div>
            </header>
            
            <!-- Main Content Area -->
            <main class="tv-main" id="tv-main" role="main">
                <div class="tv-content" id="tv-content" data-virtual-scroll="true">
                    <!-- Dynamic content will be loaded here -->
                </div>
            </main>
            
            <!-- Player Bar (initially hidden) -->
            <div class="tv-player hidden" id="tv-player" role="complementary" aria-label="Reproductor">
                <div class="tv-player-track">
                    <div class="tv-player-cover">
                        <img src="/images/placeholder.jpg" alt="" id="player-cover">
                    </div>
                    <div class="tv-player-info">
                        <div class="tv-player-title" id="player-title">‚Äî</div>
                        <div class="tv-player-artist" id="player-artist">‚Äî</div>
                    </div>
                </div>
                
                <div class="tv-player-controls">
                    <div class="tv-player-buttons">
                        <button class="tv-player-button" 
                                data-focusable="true" 
                                data-action="previous" 
                                aria-label="Anterior">
                            <span>‚èÆÔ∏è</span>
                        </button>
                        <button class="tv-player-button primary" 
                                data-focusable="true" 
                                data-action="play" 
                                aria-label="Reproducir">
                            <span>‚ñ∂Ô∏è</span>
                        </button>
                        <button class="tv-player-button" 
                                data-focusable="true" 
                                data-action="next" 
                                aria-label="Siguiente">
                            <span>‚è≠Ô∏è</span>
                        </button>
                    </div>
                    
                    <div class="tv-player-progress">
                        <span class="tv-player-time" id="player-current">0:00</span>
                        <div class="tv-progress-bar">
                            <div class="tv-progress-bar-buffered" id="player-buffered"></div>
                            <div class="tv-progress-bar-fill" id="player-progress"></div>
                        </div>
                        <span class="tv-player-time" id="player-duration">0:00</span>
                    </div>
                </div>
                
                <div class="tv-player-volume">
                    <button class="tv-player-button" 
                            data-focusable="true" 
                            data-action="mute" 
                            aria-label="Silenciar">
                        <span>üîä</span>
                    </button>
                    <div class="tv-volume-slider">
                        <div class="tv-volume-fill" id="player-volume"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Hidden Elements -->
    <!-- Error Modal -->
    <div class="tv-modal" id="error-modal" role="alertdialog" aria-hidden="true">
        <div class="tv-modal-content">
            <div class="tv-modal-header">
                <h2 class="tv-modal-title">Error</h2>
                <button class="tv-modal-close" data-focusable="true" aria-label="Cerrar">‚úï</button>
            </div>
            <div class="tv-modal-body">
                <p class="error-message"></p>
            </div>
        </div>
    </div>
    
    <!-- Notification Container -->
    <div id="notification-container" aria-live="polite" aria-atomic="true"></div>
    
    <!-- Service Worker Registration -->
    <script>
        // Register service worker immediately
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/workers/service-worker.js')
                    .then(reg => console.log('Service Worker registered:', reg))
                    .catch(err => console.error('Service Worker registration failed:', err));
            });
        }
        
        // Detect TV platform
        const detectTVPlatform = () => {
            const ua = navigator.userAgent.toLowerCase();
            if (ua.includes('webos')) return 'webos';
            if (ua.includes('tizen')) return 'tizen';
            if (ua.includes('androidtv')) return 'androidtv';
            if (ua.includes('appletv')) return 'appletv';
            if (ua.includes('roku')) return 'roku';
            return 'generic';
        };
        
        // Set platform class
        document.documentElement.setAttribute('data-platform', detectTVPlatform());
        
        // Handle theme
        const theme = localStorage.getItem('theme') || 'dark';
        document.documentElement.setAttribute('data-theme', theme);
        
        // Prevent right-click on TV
        document.addEventListener('contextmenu', e => e.preventDefault());
    </script>
    
    <!-- Main Application Scripts -->
    <script type="module" src="/js/app.js"></script>
    
    <!-- Performance Monitoring -->
    <script>
        // Basic performance monitoring
        window.addEventListener('load', () => {
            const perfData = performance.getEntriesByType('navigation')[0];
            if (perfData) {
                console.log('Page Load Time:', perfData.loadEventEnd - perfData.fetchStart, 'ms');
            }
        });
    </script>
</body>
</html>
