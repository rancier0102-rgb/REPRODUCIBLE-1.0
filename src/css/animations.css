/**
 * TV Animations CSS
 * Animaciones optimizadas para 60fps en Smart TV
 * Hardware acceleration y performance optimization
 */

/* ========================================
   Configuración base de animaciones
   ======================================== */

:root {
    /* Duraciones */
    --anim-duration-instant: 100ms;
    --anim-duration-fast: 200ms;
    --anim-duration-normal: 300ms;
    --anim-duration-slow: 500ms;
    --anim-duration-slower: 800ms;
    
    /* Easing functions optimizadas */
    --anim-ease-out: cubic-bezier(0.23, 1, 0.32, 1);
    --anim-ease-in-out: cubic-bezier(0.45, 0, 0.55, 1);
    --anim-ease-elastic: cubic-bezier(0.68, -0.55, 0.265, 1.55);
    --anim-ease-bounce: cubic-bezier(0.87, -0.41, 0.19, 1.44);
    
    /* Spring animations */
    --anim-spring-normal: cubic-bezier(0.5, 0, 0.25, 1);
    --anim-spring-wobbly: cubic-bezier(0.5, 0, 0.25, 1.5);
    --anim-spring-stiff: cubic-bezier(0.5, 0, 0.1, 1);
}

/* ========================================
   Keyframes básicos
   ======================================== */

@keyframes fadeIn {
    from {
        opacity: 0;
    }
    to {
        opacity: 1;
    }
}

@keyframes fadeOut {
    from {
        opacity: 1;
    }
    to {
        opacity: 0;
    }
}

@keyframes slideInRight {
    from {
        transform: translateX(100%);
        opacity: 0;
    }
    to {
        transform: translateX(0);
        opacity: 1;
    }
}

@keyframes slideInLeft {
    from {
        transform: translateX(-100%);
        opacity: 0;
    }
    to {
        transform: translateX(0);
        opacity: 1;
    }
}

@keyframes slideInUp {
    from {
        transform: translateY(100%);
        opacity: 0;
    }
    to {
        transform: translateY(0);
        opacity: 1;
    }
}

@keyframes slideInDown {
    from {
        transform: translateY(-100%);
        opacity: 0;
    }
    to {
        transform: translateY(0);
        opacity: 1;
    }
}

@keyframes scaleIn {
    from {
        transform: scale(0.8);
        opacity: 0;
    }
    to {
        transform: scale(1);
        opacity: 1;
    }
}

@keyframes scaleOut {
    from {
        transform: scale(1);
        opacity: 1;
    }
    to {
        transform: scale(0.8);
        opacity: 0;
    }
}

@keyframes zoomIn {
    from {
        transform: scale(0);
        opacity: 0;
    }
    to {
        transform: scale(1);
        opacity: 1;
    }
}

@keyframes rotateIn {
    from {
        transform: rotate(-180deg) scale(0.8);
        opacity: 0;
    }
    to {
        transform: rotate(0) scale(1);
        opacity: 1;
    }
}

/* ========================================
   Animaciones de pulso y latido
   ======================================== */

@keyframes pulse {
    0%, 100% {
        transform: scale(1);
    }
    50% {
        transform: scale(1.05);
    }
}

@keyframes heartbeat {
    0%, 100% {
        transform: scale(1);
    }
    10%, 30% {
        transform: scale(1.1);
    }
    20% {
        transform: scale(1.15);
    }
}

@keyframes ping {
    75%, 100% {
        transform: scale(2);
        opacity: 0;
    }
}

/* ========================================
   Animaciones de carga
   ======================================== */

@keyframes spin {
    from {
        transform: rotate(0deg);
    }
    to {
        transform: rotate(360deg);
    }
}

@keyframes loading {
    0% {
        background-position: -200% 0;
    }
    100% {
        background-position: 200% 0;
    }
}

@keyframes loadingDots {
    0%, 80%, 100% {
        opacity: 0;
        transform: scale(0.8);
    }
    40% {
        opacity: 1;
        transform: scale(1);
    }
}

@keyframes progressBar {
    from {
        transform: translateX(-100%);
    }
    to {
        transform: translateX(0);
    }
}

/* ========================================
   Animaciones de onda y ripple
   ======================================== */

@keyframes ripple {
    0% {
        transform: scale(0);
        opacity: 1;
    }
    100% {
        transform: scale(4);
        opacity: 0;
    }
}

@keyframes wave {
    0%, 100% {
        transform: translateY(0);
    }
    50% {
        transform: translateY(-20px);
    }
}

@keyframes shake {
    10%, 90% {
        transform: translateX(-1px);
    }
    20%, 80% {
        transform: translateX(2px);
    }
    30%, 50%, 70% {
        transform: translateX(-4px);
    }
    40%, 60% {
        transform: translateX(4px);
    }
}

/* ========================================
   Animaciones de focus y navegación
   ======================================== */

@keyframes focusRing {
    0% {
        box-shadow: 0 0 0 0 var(--tv-focus-color);
    }
    100% {
        box-shadow: 0 0 0 var(--tv-focus-size) var(--tv-focus-color);
    }
}

@keyframes focusPulse {
    0% {
        box-shadow: 0 0 0 0 rgba(0, 168, 255, 0.7);
    }
    70% {
        box-shadow: 0 0 0 20px rgba(0, 168, 255, 0);
    }
    100% {
        box-shadow: 0 0 0 0 rgba(0, 168, 255, 0);
    }
}

@keyframes navigateHighlight {
    0% {
        background: transparent;
    }
    50% {
        background: var(--color-surface-hover);
    }
    100% {
        background: transparent;
    }
}

/* ========================================
   Animaciones complejas
   ======================================== */

@keyframes slideAndFade {
    0% {
        transform: translateX(-50px);
        opacity: 0;
    }
    50% {
        transform: translateX(10px);
    }
    100% {
        transform: translateX(0);
        opacity: 1;
    }
}

@keyframes bounceIn {
    0% {
        transform: scale(0.3);
        opacity: 0;
    }
    50% {
        transform: scale(1.05);
    }
    70% {
        transform: scale(0.95);
    }
    100% {
        transform: scale(1);
        opacity: 1;
    }
}

@keyframes flipIn {
    from {
        transform: perspective(400px) rotateY(90deg);
        opacity: 0;
    }
    40% {
        transform: perspective(400px) rotateY(-20deg);
    }
    60% {
        transform: perspective(400px) rotateY(10deg);
    }
    80% {
        transform: perspective(400px) rotateY(-5deg);
    }
    to {
        transform: perspective(400px) rotateY(0);
        opacity: 1;
    }
}

/* ========================================
   Clases de utilidad para animaciones
   ======================================== */

/* Fade animations */
.anim-fade-in {
    animation: fadeIn var(--anim-duration-normal) var(--anim-ease-out) both;
}

.anim-fade-out {
    animation: fadeOut var(--anim-duration-normal) var(--anim-ease-out) both;
}

/* Slide animations */
.anim-slide-in-right {
    animation: slideInRight var(--anim-duration-normal) var(--anim-ease-out) both;
}

.anim-slide-in-left {
    animation: slideInLeft var(--anim-duration-normal) var(--anim-ease-out) both;
}

.anim-slide-in-up {
    animation: slideInUp var(--anim-duration-normal) var(--anim-ease-out) both;
}

.anim-slide-in-down {
    animation: slideInDown var(--anim-duration-normal) var(--anim-ease-out) both;
}

/* Scale animations */
.anim-scale-in {
    animation: scaleIn var(--anim-duration-normal) var(--anim-ease-out) both;
}

.anim-scale-out {
    animation: scaleOut var(--anim-duration-normal) var(--anim-ease-out) both;
}

.anim-zoom-in {
    animation: zoomIn var(--anim-duration-fast) var(--anim-ease-elastic) both;
}

/* Rotate animations */
.anim-rotate-in {
    animation: rotateIn var(--anim-duration-normal) var(--anim-ease-out) both;
}

/* Pulse animations */
.anim-pulse {
    animation: pulse 2s var(--anim-ease-in-out) infinite;
}

.anim-heartbeat {
    animation: heartbeat 1.3s var(--anim-ease-in-out) infinite;
}

.anim-ping {
    animation: ping 1s cubic-bezier(0, 0, 0.2, 1) infinite;
}

/* Loading animations */
.anim-spin {
    animation: spin 1s linear infinite;
}

.anim-loading {
    animation: loading 1.5s ease-in-out infinite;
}

/* Complex animations */
.anim-bounce-in {
    animation: bounceIn var(--anim-duration-slow) var(--anim-ease-bounce) both;
}

.anim-flip-in {
    animation: flipIn var(--anim-duration-slow) ease-in-out both;
}

/* ========================================
   Transiciones para elementos interactivos
   ======================================== */

/* Transición base para todos los elementos interactivos */
.tv-transition {
    transition: all var(--anim-duration-fast) var(--anim-ease-out);
}

/* Transición solo transform (mejor performance) */
.tv-transition-transform {
    transition: transform var(--anim-duration-fast) var(--anim-ease-out);
}

/* Transición solo opacity */
.tv-transition-opacity {
    transition: opacity var(--anim-duration-fast) var(--anim-ease-out);
}

/* Transiciones para hover */
.tv-hover-lift:hover {
    transform: translateY(-4px);
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);
}

.tv-hover-scale:hover {
    transform: scale(1.05);
}

.tv-hover-rotate:hover {
    transform: rotate(5deg);
}

.tv-hover-glow:hover {
    box-shadow: 0 0 20px var(--color-primary);
}

/* ========================================
   Animaciones específicas para navegación TV
   ======================================== */

/* Focus animation for TV navigation */
[data-focusable="true"] {
    transition: all var(--anim-duration-fast) var(--anim-ease-out);
}

[data-focusable="true"].focused {
    animation: focusPulse 1.5s ease-out;
    transform: scale(1.02);
}

/* Navegación entre items */
.tv-nav-item {
    transition: all var(--anim-duration-fast) var(--anim-ease-out);
    transform: translateX(0);
}

.tv-nav-item.focused {
    transform: translateX(10px);
}

/* Carrusel animations */
.tv-carousel-container {
    transition: transform var(--anim-duration-normal) var(--anim-ease-out);
}

.tv-carousel-item {
    transition: all var(--anim-duration-fast) var(--anim-ease-out);
}

.tv-carousel-item.focused {
    transform: scale(1.05);
    z-index: 10;
}

/* ========================================
   Animaciones para el reproductor
   ======================================== */

/* Play button pulse */
.tv-player-button.playing {
    animation: pulse 2s var(--anim-ease-in-out) infinite;
}

/* Progress bar animation */
.tv-progress-bar-fill {
    transition: width 100ms linear;
}

/* Volume change */
.tv-volume-fill {
    transition: width var(--anim-duration-fast) var(--anim-ease-out);
}

/* Cover art rotation */
.tv-player-cover.playing img {
    animation: spin 20s linear infinite;
}

/* ========================================
   Animaciones para modales
   ======================================== */

.tv-modal {
    transition: all var(--anim-duration-normal) var(--anim-ease-out);
}

.tv-modal.active .tv-modal-content {
    animation: bounceIn var(--anim-duration-normal) var(--anim-ease-out);
}

.tv-modal.closing .tv-modal-content {
    animation: scaleOut var(--anim-duration-fast) var(--anim-ease-in-out);
}

/* ========================================
   Animaciones para notificaciones
   ======================================== */

.tv-notification {
    animation: slideInRight var(--anim-duration-normal) var(--anim-ease-out);
}

.tv-notification.hiding {
    animation: slideOutRight var(--anim-duration-fast) var(--anim-ease-in-out);
}

@keyframes slideOutRight {
    from {
        transform: translateX(0);
        opacity: 1;
    }
    to {
        transform: translateX(calc(100% + var(--tv-spacing-lg)));
        opacity: 0;
    }
}

/* ========================================
   Animaciones staggered (escalonadas)
   ======================================== */

.anim-stagger > * {
    animation: fadeIn var(--anim-duration-normal) var(--anim-ease-out) both;
}

.anim-stagger > *:nth-child(1) { animation-delay: 0ms; }
.anim-stagger > *:nth-child(2) { animation-delay: 50ms; }
.anim-stagger > *:nth-child(3) { animation-delay: 100ms; }
.anim-stagger > *:nth-child(4) { animation-delay: 150ms; }
.anim-stagger > *:nth-child(5) { animation-delay: 200ms; }
.anim-stagger > *:nth-child(6) { animation-delay: 250ms; }
.anim-stagger > *:nth-child(7) { animation-delay: 300ms; }
.anim-stagger > *:nth-child(8) { animation-delay: 350ms; }
.anim-stagger > *:nth-child(9) { animation-delay: 400ms; }
.anim-stagger > *:nth-child(10) { animation-delay: 450ms; }

/* ========================================
   Performance optimizations
   ======================================== */

/* Deshabilitar animaciones cuando se está scrolleando */
.scrolling * {
    animation-play-state: paused !important;
    transition: none !important;
}

/* Reducir animaciones para usuarios con preferencia */
@media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
        scroll-behavior: auto !important;
    }
}

/* Optimización GPU para elementos animados */
.gpu-accelerated {
    transform: translateZ(0);
    will-change: transform;
    backface-visibility: hidden;
    perspective: 1000px;
}

/* Prevenir flickering en WebKit */
.webkit-fix {
    -webkit-transform-style: preserve-3d;
    -webkit-backface-visibility: hidden;
}
